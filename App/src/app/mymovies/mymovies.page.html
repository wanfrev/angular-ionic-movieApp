<ion-content [fullscreen]="true">
  <div class="content">
    <div class="header">
      <img
        src="assets/icons/chevron-back-outline.svg"
        class="icon"
        alt="Back Icon"
        (click)="navigateBack()"
      />
      <button (click)="openAddModal()" class="add-button">+</button>
    </div>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <!-- Modal para agregar -->
    <div *ngIf="showModal" class="modal">
      <div class="modal-content">
        <span class="close" (click)="closeAddModal()">&times;</span>
        <form (submit)="submitAddForm($event)">
          <label for="movieTitle">T√≠tulo:</label>
          <input type="text" id="movieTitle" [(ngModel)]="newMovie.title" required>

          <label for="movieSynopsis">Sinopsis:</label>
          <textarea id="movieSynopsis" [(ngModel)]="newMovie.synopsis" required></textarea>

          <label for="movieReleaseDate">Fecha de lanzamiento:</label>
          <input type="date" id="movieReleaseDate" [(ngModel)]="newMovie.releaseDate" required>

          <label for="movieDirector">Director:</label>
          <input type="text" id="movieDirector" [(ngModel)]="newMovie.director" required>

          <label for="movieDuration">Duraci√≥n (min):</label>
          <input type="number" id="movieDuration" [(ngModel)]="newMovie.duration">

          <label for="movieImage">Imagen:</label>
          <input type="file" id="movieImage" (change)="onImageSelected($event)">

          <button type="submit">Agregar Pel√≠cula</button>
        </form>
      </div>
    </div>

    <!-- Lista de pel√≠culas -->
    <div *ngIf="myMovies.length > 0; else noMovies" class="movie-grid">
      <div *ngFor="let movie of myMovies" class="movie-card">
        <img *ngIf="movie.imageUrl" [src]="movie.imageUrl" [alt]="movie.title">
        <h3>{{ movie.title }}</h3>
        <p>{{ movie.synopsis }}</p>
        <button class="delete-button" (click)="deleteMovie(movie._id)">üóëÔ∏è</button>
      </div>
    </div>

    <ng-template #noMovies>
      <p>No tienes pel√≠culas agregadas.</p>
    </ng-template>
  </div>
</ion-content>
